<!DOCTYPE html>
<html>
<head>
  <title>댓글 표시 예시</title>
</head>
<body>
  <h1>댓글</h1>
  
  <!-- 댓글 입력 폼 -->
  <form id="comment-form">
    <label for="name">이름:</label>
    <input type="text" id="name" name="name" required><br><br>
    
    <label for="comment">댓글:</label><br>
    <textarea id="comment" name="comment" rows="4" cols="50" required></textarea><br><br>
    
    <input type="submit" value="댓글 등록">
  </form>
  
  <!-- 댓글 목록 -->
  <div id="comment-list">
    <!-- 댓글이 여기에 동적으로 추가됩니다 -->
  </div>

  <!-- Firebase JavaScript SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.21.0/firebase-analytics.js"></script>
  
  <script>
    // Firebase 초기화 설정
    var firebaseConfig = {
        apiKey: "AIzaSyAE8RtK24F2cCCQD3Le8B55YfQb57NEhPg",
        authDomain: "comment-data-b6924.firebaseapp.com",
        databaseURL: "https://comment-data-b6924-default-rtdb.firebaseio.com",
        projectId: "comment-data-b6924",
        storageBucket: "comment-data-b6924.appspot.com",
        messagingSenderId: "221488055651",
        appId: "1:221488055651:web:4735f0d5088ce85815ff56",
        measurementId: "G-102DQ8EH0W"
    };
    // Firebase 앱 초기화
    firebase.initializeApp(firebaseConfig);

    // Firebase Realtime Database 참조
    var database = firebase.database();
    var commentsRef = database.ref("comments");

    // 댓글 폼 제출 시 처리
    document.getElementById("comment-form").addEventListener("submit", function(event) {
      event.preventDefault(); // 폼 제출 기본 동작 막기
      
      // 입력값 가져오기
      var name = document.getElementById("name").value;
      var comment = document.getElementById("comment").value;
      
      if (name && comment) {
        // 댓글 데이터 생성
        var newCommentRef = commentsRef.push();
        var commentData = {
          name: name,
          comment: comment
        };
        // 댓글 데이터 저장
        newCommentRef.set(commentData);
        
        // 입력값 초기화
        document.getElementById("name").value = "";
        document.getElementById("comment").value = "";
      }
    });

    // 댓글 데이터 변경 감지
    commentsRef.on("child_added", function(snapshot) {
      var commentData = snapshot.val();
      var name = commentData.name;
      var comment = commentData.comment;
      
      // 댓글 생성
      var newComment = document.createElement("div");
      newComment.innerHTML = "<h3>" + name + "</h3><p>" + comment + "</p>";
      
      // 댓글 목록에 추가
      document.getElementById("comment-list").appendChild(newComment);
    });
  </script>
</body>
</html>
